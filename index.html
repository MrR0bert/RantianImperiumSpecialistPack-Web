<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dark Mode Toggle Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    .icon-button {
      cursor: pointer;
      width: 28px;
      height: 28px;
      stroke-width: 2;
      stroke: currentColor;
      fill: none;
      transition: stroke 0.3s ease;
    }
  </style>
</head>
<body
  x-data="app()"
  x-init="init()"
  :class="darkMode ? 'dark' : ''"
  class="min-h-screen flex items-center justify-center bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300"
>
  <button
    @click="toggleDarkMode"
    :aria-label="darkMode ? 'Switch to light mode' : 'Switch to dark mode'"
    title="Toggle dark mode"
  >
    <template x-if="darkMode">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon-button" viewBox="0 0 24 24" stroke="currentColor" fill="none">
        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12.79A9 9 0 0112.21 3a7 7 0 009 9.79z" />
      </svg>
    </template>
    <template x-if="!darkMode">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon-button" viewBox="0 0 24 24" stroke="currentColor" fill="none">
        <circle cx="12" cy="12" r="5" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 1v2m0 18v2m11-11h-2M3 12H1m16.364-6.364l-1.414 1.414M6.05 17.95l-1.414 1.414m0-13.414l1.414 1.414M17.95 17.95l1.414 1.414" />
      </svg>
    </template>
  </button>

  <script>
    function app() {
      return {
        darkMode: false,
        init() {
          this.darkMode = localStorage.getItem("darkMode") === "true";
          this.updateBodyClass();
        },
        toggleDarkMode() {
          this.darkMode = !this.darkMode;
          localStorage.setItem("darkMode", this.darkMode);
          this.updateBodyClass();
        },
        updateBodyClass() {
          if (this.darkMode) {
            document.body.classList.add("dark");
          } else {
            document.body.classList.remove("dark");
          }
        },
      };
    }

    document.addEventListener("alpine:init", () => {
      Alpine.data("app", app);
    });
  </script>
</body>
</html>
